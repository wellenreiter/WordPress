<?php class wpSEO_Feedback{public static function rules(){$mu_note=(is_multisite()? esc_html__(', for multisite installations only a DELUXE or PREMIUM.', 'wpseo'): ''); switch(wpSEO::get_page()){case 'index': if($status=wpSEO_License::trial()){self::add('notice', sprintf('<strong>%s</strong> <a href="http://wpseo.de/license/" target="_blank">%s</a>%s %s', sprintf(esc_html__('You have %s ' ._n('day', 'days', $status). ' to test wpSEO.', 'wpseo'), $status, _n('day', 'days', $status, 'wpseo')), esc_html__('Please buy your license', 'wpseo'), $mu_note, wpSEO::help_icon(62, true)));}else if(wpSEO_License::expired()){self::add('critical', sprintf('<strong>%s</strong> <a href="http://wpseo.de/license/" target="_blank">%s</a>%s %s', esc_html__('Trial time of wpSEO expired.', 'wpseo'), esc_html__('Please buy your license', 'wpseo'), $mu_note, wpSEO::help_icon(62, true)));}break; case 'plugins': if(!wpSEO::is_wp('3.1')){self::add('critical', sprintf('<strong>%s:</strong> %s %s', esc_html__('Attention', 'wpseo'), esc_html__('wpSEO requires at least WordPress 3.1', 'wpseo'), wpSEO::help_icon(64, true)));}else if(!wpSEO::is_php('5.2.4')){self::add('critical', sprintf('<strong>%s:</strong> %s %s', esc_html__('Attention', 'wpseo'), esc_html__('wpSEO requires at least PHP 5.2.4', 'wpseo'), wpSEO::help_icon(64, true)));}else if(!extension_loaded('mbstring')){self::add('critical', sprintf('<strong>%s:</strong> %s %s', esc_html__('Attention', 'wpseo'), esc_html__('wpSEO requires multibyte string functions.', 'wpseo'), wpSEO::help_icon(64, true)));}else if(!empty($_GET['licensed'])){self::add('notice', sprintf('<strong>%s</strong> %s %s', esc_html__(($_GET['licensed']==='true' ? 'wpSEO successfully activated.' : 'wpSEO activation failed.'), 'wpseo'), esc_html__(($_GET['licensed']==='true' ? 'Thank you for the use.' : 'Please note minimum requirements.'), 'wpseo'),($_GET['licensed']==='true' ? '' : wpSEO::help_icon(64, true))));}else if($status=wpSEO_License::trial()){self::add('notice', sprintf('<strong>%s</strong> <a href="http://wpseo.de/license/" target="_blank">%s</a>%s %s', sprintf(esc_html__('You have %s ' ._n('day', 'days', $status). ' to test wpSEO.', 'wpseo'), $status), esc_html__('Please buy your license', 'wpseo'), $mu_note, wpSEO::help_icon(62, true)));}else if(wpSEO_License::expired()){self::add('critical', sprintf('<strong>%s</strong> <a href="http://wpseo.de/license/" target="_blank">%s</a>%s %s', esc_html__('Trial time of wpSEO expired.', 'wpseo'), esc_html__('Please buy your license', 'wpseo'), $mu_note, wpSEO::help_icon(62, true)));}break; case 'options-general': if(wpSEO_Options::get('speed_nocheck')&& !(bool)get_option('blog_public')&& current_user_can('manage_options')){self::add('notice', sprintf('<strong>%s:</strong> <a href="%s">%s</a>.', esc_html__('Attention', 'wpseo'), admin_url('options-privacy.php'), esc_html__('Search engines blocked', 'wpseo')));}if(class_exists('WPSEO_Admin')or class_exists('All_in_One_SEO_Pack')or class_exists('HeadSpace_Plugin')or class_exists('Platinum_SEO_Pack')){self::add('notice', sprintf('<strong>%s:</strong> <a href="%s">%s</a>.', esc_html__('Attention', 'wpseo'), network_admin_url('plugins.php'), esc_html__('More SEO plugins active', 'wpseo')));}break; default: break;}}public static function add($type, $msg){if(empty($type)or empty($msg)or !in_array($type, array('critical', 'notice'))){return false;}if(!$cache=wp_cache_get('wpseo_feedback')){$cache=array();}$cache[$type]=$msg; wp_cache_set('wpseo_feedback', $cache);}public static function get($type=''){if(!$cache=wp_cache_get('wpseo_feedback')){return false;}if(empty($type)){return $cache;}if(in_array($type, array('critical', 'notice'))&& array_key_exists($type, $cache)){return $cache[$type];}return false;}public static function network(){self::_display();}public static function admin(){if(!is_multisite()){self::_display();}}private static function _display(){if(!$errors=self::get()){return false;}$matrix=array('critical'=> 'error', 'notice'=> 'updated'); foreach($errors as $type=> $msg){echo sprintf('<div class="%s"><p>%s</p></div>', esc_attr($matrix[$type]), $msg);}}}